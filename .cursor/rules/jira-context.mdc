---
description: How to use Jira context when working on features, tasks, and bugs in this project.
globs:
alwaysApply: true
---

# Jira as Source of Truth

Every piece of work in this repo is tied to a Jira ticket in the **MBT** project.

---

## How to Access Jira Context — Two Options

### Option A: Atlassian Extension (UI — zero config)
The **Atlassian for VS Code/Cursor** extension gives the developer a UI to browse and view tickets.

- Hover over any `MBT-XX` reference in code to see the issue inline
- Browse issues in the Atlassian sidebar
- **To give the AI context:** open the ticket → copy the AC → paste into chat

> No additional setup required. This is the default path.

---

### Option B: MCP Server (AI-native — optional upgrade)
The **`@sooperset/mcp-atlassian`** MCP server lets the AI fetch ticket data automatically.

Setup: see `docs/SECRETS.md` → **Jira — Accessing Ticket Context**

When configured, just reference a ticket number in chat:
```
mcp: atlassian → get_issue(issueKey: "MBT-42")
```

> Best when you want zero copy/paste friction per ticket.

---

## Before Writing Any Code

1. Identify the Jira ticket (e.g. `MBT-42`)
2. Pull the full story + AC — via extension UI **or** MCP auto-fetch
3. Confirm any ambiguous AC with the user before starting
4. Identify the work type — determines whether `docs/features/` entry is needed
5. Name your branch: `feature/MBT-42-<slug>` or `hotfix/MBT-99-<slug>`

---

## Work Type Definitions

| Jira Type | What it is | Docs impact |
|---|---|---|
| **User Story** | End-user visible feature or change | Requires `docs/features/<slug>.md` update |
| **Task** | System / infrastructure / internal change | No end-user doc needed |
| **Bug** | Something broken — needs verification criteria | Bug doc only if behavior change is user-visible |

---

## After Implementation

For **User Stories**: update or create `docs/features/MBT-XX-<slug>.md` using the template
at `docs/features/_template.md`. Write as if explaining the feature to an end user — not a developer.

For **Tasks**: no doc needed. PR description is sufficient.

For **Bugs**: add a "Verification" section to the PR if the fix changes visible behavior.

---

## Ticket Reference in Commits and PRs

- Commit footer: `Closes MBT-42`
- PR title: `[MBT-42] Short imperative description`
- The Jira ticket number must appear in every PR.
